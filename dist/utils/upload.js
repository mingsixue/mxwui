import request from"./request";import config from"../config/config";let getOssToken=async e=>{},upload=(t="img",a)=>{wx.chooseMedia({count:1,mediaType:["image"],sourceType:["album"],success(e){let s=e.tempFiles[0].tempFilePath;getOssToken(e=>{let o=`xcx-demo/${t}/${+new Date}-`+Math.floor(Math.random()*+new Date);wx.uploadFile({url:config.OSS_UPLOAD_HOST,filePath:s,name:"file",formData:{key:o,policy:e.policy,OSSAccessKeyId:e.OSSAccessKeyId,signature:e.signature,"x-oss-security-token":e["x-oss-security-token"]},success:()=>{var e=config.OSS_HOST+"/"+o;a&&a(e)},fail:e=>{console.log("=-= upload err",e)}})})}})};export default upload;