import store from"./store";let app=getApp(),getUserInfo=()=>store.getItem("_userInfo"),getIsLogin=()=>!!getUserInfo().token,getUserId=()=>getUserInfo().id,setUserInfo=(e,t)=>{var o=getUserInfo();o[e]=t,store.setItem("_userInfo",o),app.globalData.user=o},setUserAllInfo=e=>{e={...getUserInfo(),...e};store.setItem("_userInfo",e),app.globalData.user=e},getScore=()=>getUserInfo().totalScore||0,setTotalScore=(e,t="add")=>{var o=getUserInfo(),s=o.totalScore;let r=o.totalScore;"add"==t?r=s+e:"reduce"==t&&(r=s-e)<0&&(r=0),o.totalScore=r,store.setItem("_userInfo",o),app.globalData.user=o},checkLogin=e=>!!getIsLogin()||(wx.showToast({title:"您需要登录查看",icon:"none",duration:2e3,success:()=>{setTimeout(()=>{e?wx.navigateTo({url:"/pages/login/index?userId="+e}):wx.navigateTo({url:"/pages/login/index"})},1500)}}),!1),User={getIsLogin:getIsLogin,getUserInfo:getUserInfo,getUserId:getUserId,setUserInfo:setUserInfo,setUserAllInfo:setUserAllInfo,getScore:getScore,setTotalScore:setTotalScore,checkLogin:checkLogin};export default User;