import request from"../../../utils/request";import Upload from"../../../utils/upload";import store from"../../../utils/store";import XCX from"../../../utils/index";let app=getApp();Page({data:{isLoading:!1,hasRegister:!1,openid:"",avatar:"",phone:"",nickname:""},onLoad(a){this.sourceUserId=a.userId||"",this.init()},init(){var a=XCX.getNavHeight();this.setData({navHeight:a}),this.login()},login(){},handleAvatarUpload(){var a=this.data.hasRegister;a||Upload("user/avatar",a=>{this.setData({avatar:a}),this.handleSave()})},inputNickName(a){a=a.detail.value;this.setData({nickname:a})},inputPhone(a){a=a.detail.value;this.setData({phone:a})},chooseavatar(a){a=a.detail.avatarUrl;this.setData({avatar:a})},handleSave(){var{avatar:a,phone:t,nickname:e}=this.data;a?e?t?/^(1[3456789][0-9])\d{8}$/.test(t)?this.sourceUserId&&this.sourceUserId:wx.showToast({title:"手机号不正确",icon:"none"}):wx.showToast({title:"请填写手机号码",icon:"none"}):wx.showToast({title:"请填写昵称",icon:"none"}):wx.showToast({title:"请先设置头像",icon:"none"})},handleLogin(){},handelCancel(){wx.navigateBack()}});