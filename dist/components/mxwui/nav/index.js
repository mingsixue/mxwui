import{COLOR,HOME_URL,DEFAULT_ICON,DEFAULT_ICON_HOME}from"../utils/common";Component({properties:{theme:{type:String,value:"dark"},bgColor:{type:String,value:COLOR.WHITE_COLOR},title:{type:String,value:""},titleColor:{type:String,value:""},titleImg:{type:String,value:""},isLeft:{type:Boolean,value:!1},isHideIcon:{type:Boolean,value:!0},iconName:{type:String,value:DEFAULT_ICON},iconColor:{type:String,value:""},iconImg:{type:String,value:""},isCustomIconHandle:{type:Boolean,value:!1},secondIconName:{type:String,value:""},secondIconColor:{type:String,value:""},secondIconImg:{type:String,value:""},zIndex:{type:Number,value:519},isFixed:{type:Number,value:!0}},attached(){var{statusBarHeight:t,screenWidth:e}=wx.getSystemInfoSync(),n=this.getBoxStyle();let i=this.data.iconColor||"",a=(this.data.theme&&!i&&(i="light"==this.data.theme?COLOR.TEXT_COLOR:COLOR.WHITE_COLOR),this.data.bgColor||"");this.data.theme&&a==COLOR.WHITE_COLOR&&(a="light"==this.data.theme?COLOR.WHITE_COLOR:COLOR.THEME_COLOR),this.setData({statusBarHeight:t,screenWidth:e,boxStyle:n,iconColor:i,bgColor:a})},ready(){var t=getCurrentPages(),e=1<t.length;let n=!1,i=("/"+t[t.length-1].route==HOME_URL&&(n=!0),this.data.iconName);i!=DEFAULT_ICON||e||(i=DEFAULT_ICON_HOME),this.setData({isBack:e,isCurrent:n,iconName:i})},methods:{handleIcon(){this.data.isCustomIconHandle?this.triggerEvent("nav_icon_tap"):this.data.isBack?wx.navigateBack():this.data.isCurrent||wx.redirectTo({url:HOME_URL})},handleSecondIcon(){this.triggerEvent("nav_second_icon_tap")},getBoxStyle(){let e="padding: 0 0 2px 0;";var n=this.getMenuRect(),i=this.data.statusBarHeight;if(n&&n.height<46){var a=n.height;let t=n.top;t<i&&(t+=i);n=t-i,i=46-a-n;e=0<n-i?"padding: "+(n-i)+"px 0 0 0;":0<i-n?"padding: 0 0 "+(i-n)+"px 0;":"padding: 0;"}return e},getMenuRect(){if(this.menuRect&&this.menuRect.height)return this.menuRect;try{this.menuRect=wx.getMenuButtonBoundingClientRect&&wx.getMenuButtonBoundingClientRect()}catch(t){return null}return this.menuRect&&this.menuRect.height?this.menuRect:null}}});